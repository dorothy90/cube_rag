<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cube LLM</title>
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@2.0.6/css/pico.min.css" />
  <link rel="stylesheet" href="/static/styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/prismjs@1.29.0/themes/prism-tomorrow.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Cube LLM</div>
    <nav><a href="/?new=1" class="btn primary">새 채팅</a></nav>
  </header>

  <main class="container">
    <!-- Hero input centered like ChatGPT landing -->
    <section id="hero" class="hero">
      <div class="hero-inner">
        <h2>무엇을 도와드릴까요?</h2>
        <p>내부 Q&A와 LLM, (옵션) 웹검색으로 답변해드립니다.</p>
        <form id="hero-form">
          <!-- 질문 모드 입력 -->
          <div id="hero-ask-wrap">
            <input id="hero-input" class="hero-input" type="text" placeholder="예: FastAPI에서 파일 업로드는 어떻게 하나요?" aria-label="질문" />
          </div>
          <!-- 요약 모드 입력 -->
          <div id="hero-summarize-wrap" style="display:none;">
            <div class="hero-summarize-grid">
              <input id="hero-s-from" type="date" class="hero-input" aria-label="from 날짜" />
              <input id="hero-s-to" type="date" class="hero-input" aria-label="to 날짜" />
              <input id="hero-s-email" type="email" class="hero-input" placeholder="수신 이메일 주소" aria-label="이메일" />
              <button id="hero-s-send-email" class="btn" type="button">메일보내기</button>
            </div>
          </div>
      <!-- Enter 키 암시적 제출을 보장하기 위한 숨김 제출 버튼 -->
      <button type="submit" style="display:none" aria-hidden="true"></button>
        </form>
          <!-- 모드 전환: 질문하기 / 요약하기 -->
          <div class="mode-toggle" id="hero-mode-toggle">
            <button type="button" id="hero-mode-ask" class="btn mode-btn primary">질문하기</button>
            <button type="button" id="hero-mode-summarize" class="btn mode-btn">요약하기</button>
          </div>
          <!-- 실시간 요약 로그 패널 (메일 전송 시 노출) -->
          <div id="summary-log" class="summary-log" style="display:none;">
            <div class="summary-log-header"><strong>실시간 요약 로그</strong></div>
            <pre id="summary-log-body" class="summary-log-body"></pre>
            <div id="summary-actions" style="display:none; margin-top:8px;">
              <button id="btn-view-mindmap" class="btn" type="button">마인드맵 보기</button>
            </div>
          </div>
      </div>
    </section>

    <!-- Workspace: Left(chat) / Right(notes) -->
    <div id="workspace" class="workspace" style="display:none;">
      <!-- Left: Chat Pane -->
      <section class="chat-pane">
        <div id="messages" class="container-narrow messages"></div>
        <!-- Composer fixed at bottom -->
        <form id="composer" class="composer">
          <!-- 채팅 영역 내 모드 전환 -->
          <div class="container-narrow">
            <div class="mode-toggle" id="composer-mode-toggle" style="display:none;">
              <button type="button" id="composer-mode-ask" class="btn mode-btn primary">질문하기</button>
              <button type="button" id="composer-mode-summarize" class="btn mode-btn">요약하기</button>
            </div>
          </div>
          <!-- 질문 모드 입력 -->
          <div class="container-narrow composer-wrap" id="composer-ask-wrap">
            <input id="composer-input" class="composer-input" type="text" placeholder="메시지를 입력하세요" />
            <button class="btn primary" type="submit">보내기</button>
          </div>
          <!-- 요약 모드 입력 (채팅 영역 제거) -->
          <div class="container-narrow"><span id="status" class="status" style="display:none;">요청 중…</span></div>
        </form>
      </section>

      <!-- Right: Notes Pane -->
      <aside class="notes-pane">
        <header class="notes-header">
          <h3>메모</h3>
          <div class="notes-toolbar">
            <input id="notes-search" type="text" placeholder="검색(질문/내용)" aria-label="메모 검색" />
            <div class="notes-actions">
              <button id="clear-notes" class="btn" type="button">모두삭제</button>
            </div>
          </div>
        </header>
        <div class="notes-body">
          <table class="notes-table">
            <thead>
              <tr>
                <th>날짜</th>
                <th>질문</th>
              </tr>
            </thead>
            <tbody id="notes-tbody"></tbody>
          </table>
        </div>
      </aside>
    </div>
  </main>
  <script type="module" src="/static/app.js"></script>
</body>
</html>


